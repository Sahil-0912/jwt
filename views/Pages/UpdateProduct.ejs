<!DOCTYPE html>
<html dir="ltr" lang="en">
<%- include('../layouts/HeadSection') -%>

  <body>

    <!-- Preloader -->
    <div class="preloader">
      <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
      </div>
    </div>

    <!-- Main wrapper -->
    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
      data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">

      <!-- Topbar header -->
      <%- include('../layouts/Header')-%>

        <!-- Sidebar -->
        <%- include('../layouts/SideBar')-%>

          <!-- Page wrapper -->
          <div class="page-wrapper">

            <!-- Breadcrumb -->
            <div class="page-breadcrumb">
              <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                  <div class="ms-auto text-end">
                    <nav aria-label="breadcrumb">
                      <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Add</li>
                      </ol>
                    </nav>
                  </div>
                </div>
              </div>
            </div>

            <!-- Container fluid -->
            <div class="container-fluid">
              <div class="container">
                <div class="row">
                  <form class="form-horizontal" method="post" enctype="multipart/form-data" action="/api/product">
                    <div class="card-body">
                      <h4 class="card-title"> Add Product</h4>

                      <!-- Category Name -->
                      <div class="form-group row">
                        <label for="fname" class="col-sm-3 text-end control-label col-form-label">Category
                          Name</label>
                        <div class="col-sm-9">
                          <select name="category" id="" class="form-select"
                            onchange="window.location.href=`/UpdateProduct?id=<%=product._id%>&cat_id=${this.value}`">

                            <% categories.forEach((cat)=> { %>
                              <option value="<%=cat._id%>" <%=cat?._id.toString()===selectcat ? "selected" : "" %>
                                >
                                <%= cat.cat_name %>
                              </option>
                              <% }) %>
                          </select>
                        </div>
                      </div>


                      <!-- Sub Category -->
                      <div class="form-group row">
                        <label for="fname" class="col-sm-3 text-end control-label col-form-label">Sub Category
                          Name</label>
                        <div class="col-sm-9">
                          <select name="subCategory" id="" class="form-select"> >
                            <% subcategories?.forEach((subcat)=>{ %>
                              <option value="<%=subcat._id%>" <%=subcat?._id.toString()==selected_subcat ? "selected"
                                : "" %>>
                                <%=subcat.sub_cat %>
                              </option>
                              <% }) %>
                          </select>
                        </div>
                                  
                      </div>

                      <!-- Product Name -->
                      <div class="form-group row">
                        <label class="col-sm-3 text-end control-label col-form-label">Product Name</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="product_name" name="product_name"
                            value="<%= product.product_name %>" placeholder="Product Name Here" />
                        </div>
                      </div>

                      <!-- Product Price -->
                      <div class="form-group row">
                        <label class="col-sm-3 text-end control-label col-form-label">Product Price</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="product_price" name="product_price"
                            value="<%= product.product_price %>" placeholder="Product Price Here" />
                        </div>
                      </div>

                      <!-- Product Image -->
                      <div class="form-group row">
                        <label class="col-sm-3 text-end control-label col-form-label">Product Image</label>
                        <div class="col-sm-9">
                          <input type="file" class="form-control" id="product_img" name="product_img" />
                        </div>
                      </div>

                      <!-- Submit Button -->
                      <div class="border-top">
                        <div class="card-body">
                          <button class="btn btn-primary">Submit</button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <!-- Footer -->
            <footer class="footer text-center">
              All Rights Reserved by Matrix-admin. Designed and Developed by
              <a href="https://www.wrappixel.com">WrapPixel</a>.
            </footer>
          </div>
    </div>
    <%- include('../layouts/jslink')-%>
  </body>

</html>